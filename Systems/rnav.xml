<?xml version="1.0" encoding="UTF-8"?>
<PropertyList>
	<filter>
		<name>Aircraft position relative to selected station, X</name>
		<type>gain</type>
		<gain>1</gain>
		<input>
			<condition>
				<property>/instrumentation/nav[1]/in-range</property>
			</condition>
			<expression>
				<product>
					<property>/instrumentation/dme/indicated-distance-nm</property>
					<cos>
						<deg2rad>
							<property>/instrumentation/nav[1]/radials/actual-deg</property>
						</deg2rad>
					</cos>
				</product>
			</expression>
		</input>
		<output>/instrumentation/rnav/relative-aircraft-position-x</output>
	</filter>
	<filter>
		<name>Aircraft position relative to selected NAV2 station, Y</name>
		<type>gain</type>
		<gain>1</gain>
		<input>
			<condition>
				<property>/instrumentation/nav[1]/in-range</property>
			</condition>
			<expression>
				<product>
					<property>/instrumentation/dme/indicated-distance-nm</property>
					<sin>
						<deg2rad>
							<property>/instrumentation/nav[1]/radials/actual-deg</property>
						</deg2rad>
					</sin>
				</product>
			</expression>
		</input>
		<output>/instrumentation/rnav/relative-aircraft-position-y</output>
	</filter>
	<filter>
		<name>Selected waypoint position relative to selected NAV2 station, X</name>
		<type>gain</type>
		<gain>1</gain>
		<input>
			<condition>
				<property>/instrumentation/nav[1]/in-range</property>
			</condition>
			<expression>
				<product>
					<property>/instrumentation/rnav/current-waypoint/distance-nm</property>
					<cos>
						<deg2rad>
							<property>/instrumentation/rnav/current-waypoint/bearing-deg</property>
						</deg2rad>
					</cos>
				</product>
			</expression>
		</input>
		<output>/instrumentation/rnav/relative-waypoint-position-x</output>
	</filter>
	<filter>
		<name>Selected waypoint position relative to selected NAV2 station, Y</name>
		<type>gain</type>
		<gain>1</gain>
		<input>
			<condition>
				<property>/instrumentation/nav[1]/in-range</property>
			</condition>
			<expression>
				<product>
					<property>/instrumentation/rnav/current-waypoint/distance-nm</property>
					<sin>
						<deg2rad>
							<property>/instrumentation/rnav/current-waypoint/bearing-deg</property>
						</deg2rad>
					</sin>
				</product>
			</expression>
		</input>
		<output>/instrumentation/rnav/relative-waypoint-position-y</output>
	</filter>
	<filter>
		<name>Distance between selected waypoint and aircraft position</name>
		<type>gain</type>
		<gain>1</gain>
		<input>
			<condition>
				<property>/instrumentation/nav[1]/in-range</property>
			</condition>
			<expression>
				<sqrt>
					<sum>
						<pow>
							<dif>
								<property>/instrumentation/rnav/relative-aircraft-position-x</property>
								<property>/instrumentation/rnav/relative-waypoint-position-x</property>
							</dif>
							<value>2</value>
						</pow>
						<pow>
							<dif>
								<property>/instrumentation/rnav/relative-aircraft-position-y</property>
								<property>/instrumentation/rnav/relative-waypoint-position-y</property>
							</dif>
							<value>2</value>
						</pow>
					</sum>
				</sqrt>
			</expression>
		</input>
		<output>/instrumentation/rnav/waypoint-distance-nm</output>
	</filter>
	<filter>
		<name>Waypoint bearing</name>
		<type>gain</type>
		<gain>1</gain>
		<input>
			<condition>
				<property>/instrumentation/nav[1]/in-range</property>
			</condition>
			<expression>
				<rad2deg>
					<atan2>
						<dif>
							<property>/instrumentation/rnav/relative-aircraft-position-y</property>
							<property>/instrumentation/rnav/relative-waypoint-position-y</property>
						</dif>
						<dif>
							<property>/instrumentation/rnav/relative-aircraft-position-x</property>
							<property>/instrumentation/rnav/relative-waypoint-position-x</property>
						</dif>
					</atan2>
				</rad2deg>
			</expression>
		</input>
		<output>/instrumentation/rnav/actual-radial-deg</output>
		<period>
			<min>0</min>
			<max>360</max>
		</period>
	</filter>
	<filter>
		<name>Waypoint reciprocal bearing</name>
		<type>gain</type>
		<gain>1</gain>
		<input>
			<condition>
				<property>/instrumentation/nav[1]/in-range</property>
			</condition>
			<expression>
				<sum>
					<property>/instrumentation/rnav/actual-radial-deg</property>
					<value>180</value>
				</sum>
			</expression>
		</input>
		<output>/instrumentation/rnav/reciprocal-radial-deg</output>
		<period>
			<min>0</min>
			<max>360</max>
		</period>
	</filter>
	<filter>
		<name>Enroute radial deviation</name>
		<type>gain</type>
		<gain>1</gain>
		<input>
			<condition>
				<and>
					<property>/instrumentation/nav[1]/in-range</property>
					<equals>
						<property>/instrumentation/rnav/mode</property>
						<value>0</value>
					</equals>
				</and>
			</condition>
			<expression>
				<product>
					<sin>
						<deg2rad>
							<dif>
								<property>/instrumentation/nav[1]/radials/selected-deg</property>
								<property>/instrumentation/rnav/actual-radial-deg</property>
							</dif>
						</deg2rad>
					</sin>
					<property>/instrumentation/rnav/waypoint-distance-nm</property>
					<value>2</value>
				</product>
			</expression>
		</input>
		<output>/instrumentation/rnav/heading-needle-deflection-norm</output>
		<min>-1</min>
		<max>1</max>
	</filter>
	<filter>
		<name>Approach radial deviation</name>
		<type>gain</type>
		<gain>1</gain>
		<input>
			<condition>
				<and>
					<property>/instrumentation/nav[1]/in-range</property>
					<equals>
						<property>/instrumentation/rnav/mode</property>
						<value>1</value>
					</equals>
				</and>
			</condition>
			<expression>
				<product>
					<sin>
						<deg2rad>
							<dif>
								<property>/instrumentation/nav[1]/radials/selected-deg</property>
								<property>/instrumentation/rnav/actual-radial-deg</property>
							</dif>
						</deg2rad>
					</sin>
					<property>/instrumentation/rnav/waypoint-distance-nm</property>
					<value>8</value>
				</product>
			</expression>
		</input>
		<output>/instrumentation/nav[1]/heading-needle-deflection-norm</output>
		<min>-1</min>
		<max>1</max>
	</filter>
	<filter>
		<name>Difference between selected radial and aircraft bearing</name>
		<type>gain</type>
		<gain>1</gain>
		<input>
			<condition>
				<property>/instrumentation/nav[1]/in-range</property>
			</condition>
			<expression>
				<abs>
					<dif>
						<property>/instrumentation/nav[1]/radials/selected-deg</property>
						<property>/instrumentation/rnav/actual-radial-deg</property>
					</dif>
				</abs>
			</expression>
		</input>
		<output>/instrumentation/rnav/radial-bearing-difference</output>
	</filter>
	<logic>
		<input>
			<or>
				<less-than>
					<property>/instrumentation/rnav/radial-bearing-difference</property>
					<value>90</value>
				</less-than>
				<greater-than>
					<property>/instrumentation/rnav/radial-bearing-difference</property>
					<value>270</value>
				</greater-than>
			</or>
		</input>
		<output>/instrumentation/nav[1]/from-flag</output>
	</logic>
	<logic>
		<inverted>true</inverted>
		<input>
			<property>/instrumentation/nav[1]/from-flag</property>
		</input>
		<output>/instrumentation/nav[1]/to-flag</output>
	</logic>
</PropertyList>

