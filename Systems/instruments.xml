<?xml version="1.0"?>
<PropertyList>
	<filter>
		<name>Gear retracted indicator light illumination</name>
		<type>gain</type>
		<gain>1</gain>
		<input>
			<condition>
				<or>
					<and>
						<equals>
							<property>/gear/gear[0]/position-norm</property>
							<value>0</value>
						</equals>
						<equals>
							<property>/gear/gear[1]/position-norm</property>
							<value>0</value>
						</equals>
						<equals>
							<property>/gear/gear[2]/position-norm</property>
							<value>0</value>
						</equals>
					</and>
					<property>/sim/model/controls/gear/retracted-lamp-test</property>
				</or>
			</condition>
			<value>1</value>
		</input>
		<input>
			<value>0</value>
		</input>
		<output>/sim/model/controls/gear/retracted-lamp-illumination</output>
	</filter>
	
	<filter>
		<name>Gear extended indicator light illumination</name>
		<type>gain</type>
		<gain>1</gain>
		<input>
			<condition>
				<or>
					<and>
						<equals>
							<property>/gear/gear[0]/position-norm</property>
							<value>1</value>
						</equals>
						<equals>
							<property>/gear/gear[1]/position-norm</property>
							<value>1</value>
						</equals>
						<equals>
							<property>/gear/gear[2]/position-norm</property>
							<value>1</value>
						</equals>
					</and>
					<equals>
						<property>/sim/model/controls/gear/extended-lamp-test</property>
						<value>2</value> <!-- position 1 (half pushed) is warning sound test, only position 2 (fully in) is light test -->
					</equals>
				</or>
			</condition>
			<value>1</value>
		</input>
		<input>
			<value>0</value>
		</input>
		<output>/sim/model/controls/gear/extended-lamp-illumination</output>
	</filter>
	<filter>
		<type>noise-spike</type>
		<max-rate-of-change>1</max-rate-of-change>
		<input>/controls/gear/gear-down</input>
		<output>/sim/model/controls/gear/lever</output>
	</filter>
	
	<!-- NAV2 ARC - TO=-1, FROM=1, normal OBS=0-->
	<filter>
		<name>NAV2 Automatic Radial Centering</name>
		<type>gain</type>
		<gain>1</gain>
		<enable>
			<condition>
				<not-equals>
					<property>/instrumentation/nav[1]/radials/arc-mode</property>
					<value>0</value>
				</not-equals>
			</condition>
		</enable>
		<input>
			<expression>
				<floor>
					<diff>
						<property>/instrumentation/nav[1]/heading-deg</property>
						<property>/environment/magnetic-variation-deg</property>
					</diff>
				</floor>
			</expression>
		</input>
		<!-- in FROM mode, add 180 to the heading to achieve a FROM radial -->
		<reference>
			<condition>
				<equals>
					<property>/instrumentation/nav[1]/radials/arc-mode</property>
					<value>1</value>
				</equals>
			</condition>					
			<value>-180</value>
		</reference>
		<output>
			<property>/instrumentation/nav[1]/radials/selected-deg</property>
			<period>
				<min>0</min>
				<max>359</max>
			</period>
		</output>
	</filter>
</PropertyList>
					
